webpackJsonp([1],{"/yEH":function(t,e){},"05wW":function(t,e){},HFBv:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var r=a("VU/8")({name:"App"},o,!1,function(t){a("gDX1")},"data-v-079fb800",null).exports,s=a("/ocq"),i=a("Dd8w"),l=a.n(i),c={name:"Button",props:{buttonName:String,role:String},methods:{show:function(){this.$emit("show")}}},u={render:function(){var t=this.$createElement;return(this._self._c||t)("button",{staticClass:"btn",on:{click:this.show}},[this._v(this._s(this.buttonName))])},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(t){a("Q1WI")},"data-v-2bf87fd2",null).exports,m=a("Gu7T"),f=a.n(m),h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tbody",[a("tr",{staticClass:"row-table",on:{click:t.toggleChildren}},[a("td",{staticClass:"el-name"},[t.showChildren?a("div",[t._v("-")]):t._e(),t._v(" "),t.showChildren?t._e():a("div",[t._v("+")]),t._v("\n            "+t._s(t.user.name)+"\n        ")]),t._v(" "),a("td",[t._v(t._s(t.user.phone))])]),t._v(" "),t._l(t.user.children,function(e){return t.showChildren?a("UserRow",{key:e.id,attrs:{user:e}}):t._e()})],2)},staticRenderFns:[]};var v=a("VU/8")({name:"UserRow",props:["user"],data:function(){return{showChildren:!1}},methods:{toggleChildren:function(){this.showChildren=!this.showChildren}}},h,!1,function(t){a("vJey")},null,null).exports,p=a("NYxO"),_={name:"Table",components:{UserRow:v},data:function(){return{sortByColumn:null,sortOrder:1}},methods:{sortBy:function(t){this.sortByColumn===t?this.sortOrder*=-1:(this.sortByColumn=t,this.sortOrder=1),this.sortFormData()},sortFormData:function(){var t=this,e=[].concat(f()(this.getFormData));e.sort(function(e,a){return t.getValueByPath(e,t.sortByColumn)>t.getValueByPath(a,t.sortByColumn)?t.sortOrder:-t.sortOrder}),console.log(e),this.$store.dispatch("saveFormData",e)},getValueByPath:function(t,e){return e?e.split(".").reduce(function(t,e){return t&&t[e]},t):null}},computed:l()({},Object(p.b)(["getFormData"]),{sortedFormData:function(){var t=this,e=[].concat(f()(this.getFormData));return e.sort(function(e,a){return t.getValueByPath(e,t.sortByColumn)>t.getValueByPath(a,t.sortByColumn)?t.sortOrder:-t.sortOrder}),e}})},D={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",[a("thead",[a("tr",[a("th",{staticClass:"col-table",attrs:{scope:"col"},on:{click:function(e){return t.sortBy("name")}}},[t._v("Имя")]),t._v(" "),a("th",{staticClass:"col-table",attrs:{scope:"col"},on:{click:function(e){return t.sortBy("phone")}}},[t._v("Телефон")])])]),t._v(" "),t._l(t.sortedFormData,function(t){return a("UserRow",{key:t.id,attrs:{user:t}})})],2)},staticRenderFns:[]};var y=a("VU/8")(_,D,!1,function(t){a("O+bd")},null,null).exports,b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("footer",{staticClass:"modal-footer"},[t._t("footer",function(){return[a("button",{staticClass:"btn-save",attrs:{type:"button"},on:{click:t.addTask}},[t._v("\n            Сохранить\n        ")])]})],2)},staticRenderFns:[]};var g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"modal-body"},[t._t("body",function(){return[a("div",{staticClass:"form-body"},[a("div",{staticClass:"inputData"},[a("label",{attrs:{for:"name"}},[t._v("Имя")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.name,expression:"formData.name"}],attrs:{type:"text",name:"name"},domProps:{value:t.formData.name},on:{input:function(e){e.target.composing||t.$set(t.formData,"name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"inputData"},[a("label",{attrs:{for:"phone"}},[t._v("Телефон")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.phone,expression:"formData.phone"}],attrs:{type:"tel",name:"phone",pattern:"[0-9]{3}-[0-9]{2}-[0-9]{3}"},domProps:{value:t.formData.phone},on:{input:function(e){e.target.composing||t.$set(t.formData,"phone",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"inputData"},[a("label",{attrs:{for:"parent"}},[t._v("Начальник")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.formData.parent,expression:"formData.parent"}],attrs:{name:"parent"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.formData,"parent",e.target.multiple?a:a[0])}}},t._l(t.flattenFormData(t.formDataProp),function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v("\n                        "+t._s(e.name)+"\n                    ")])}),0)])])]})],2)},staticRenderFns:[]};var C={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"modal-header"},[t._t("header",function(){return[t._v("\n        Добавление пользователя\n\n        "),a("button",{staticClass:"btn-close",attrs:{type:"button"},on:{click:t.close}},[t._v("\n            x\n        ")])]})],2)},staticRenderFns:[]};var F={name:"Modal",components:{FooterModal:a("VU/8")({name:"FooterModal",methods:{addTask:function(){this.$emit("addTask")}}},b,!1,function(t){a("05wW")},"data-v-28d22a7a",null).exports,BodyModal:a("VU/8")({name:"BodyModal",props:["formDataProp"],data:function(){return{formData:{id:null,name:null,phone:null,parent:null,children:[]}}},methods:{flattenFormData:function(t){var e=this,a=[];return t.forEach(function(t){a.push(t),t.children&&(a=a.concat(e.flattenFormData(t.children)))}),a}}},g,!1,function(t){a("HFBv")},"data-v-89071f2c",null).exports,HeaderModal:a("VU/8")({name:"HeaderModal",methods:{close:function(){this.$emit("close")}}},C,!1,function(t){a("sxx3")},"data-v-c4d7a782",null).exports},computed:l()({},Object(p.b)(["getFormData"]),{formData:function(){return this.getFormData}}),methods:{close:function(){this.$emit("close")},addTask:function(){var t=this.$refs.bodyModal.formData,e=t.id,a=t.name,n=t.phone,o=t.parent,r=t.children;this.$emit("dataReceived",{id:e,name:a,phone:n,parent:o,children:r}),this.$emit("close")}}},w={render:function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"modal-fade"}},[e("div",{staticClass:"modal-backdrop"},[e("div",{staticClass:"modal"},[e("HeaderModal",{on:{close:this.close}}),this._v(" "),e("BodyModal",{ref:"bodyModal",attrs:{formDataProp:this.formData}}),this._v(" "),e("FooterModal",{on:{addTask:this.addTask}})],1)])])},staticRenderFns:[]};var x={name:"View",components:{Button:d,Table:y,Modal:a("VU/8")(F,w,!1,function(t){a("ZfHx")},"data-v-0c19b3d0",null).exports},data:function(){return{isModalVisible:!1}},computed:l()({},Object(p.b)(["getFormData"]),{formData:function(){return this.getFormData}}),methods:{showModal:function(){this.isModalVisible=!0},closeModal:function(){this.isModalVisible=!1},saveData:function(t){this.$store.dispatch("saveFormData",t)}}},B={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"main-body"},[e("Button",{attrs:{buttonName:"Добавить"},on:{show:this.showModal}}),this._v(" "),e("Table"),this._v(" "),e("Modal",{directives:[{name:"show",rawName:"v-show",value:this.isModalVisible,expression:"isModalVisible"}],on:{close:this.closeModal,dataReceived:this.saveData}})],1)},staticRenderFns:[]};var M=a("VU/8")(x,B,!1,function(t){a("/yEH")},"data-v-2d2d4a4d",null).exports;n.a.use(s.a);var $=new s.a({mode:"history",routes:[{path:"/",name:"/",component:M}]}),V=a("mvHQ"),k=a.n(V),O=a("BO1k"),R=a.n(O);n.a.use(p.a);var U=new p.a.Store({state:{formData:JSON.parse(localStorage.getItem("formData"))||[],idCounter:parseInt(localStorage.getItem("idCounter"))||0},mutations:{addFormData:function(t,e){function a(t,e){if(t.id===e.parent)return t.children.push(e),!0;var n=!0,o=!1,r=void 0;try{for(var s,i=R()(t.children);!(n=(s=i.next()).done);n=!0){if(a(s.value,e))return!0}}catch(t){o=!0,r=t}finally{try{!n&&i.return&&i.return()}finally{if(o)throw r}}return!1}if(e.id=t.idCounter++,null!==e.parent){var n=!0,o=!1,r=void 0;try{for(var s,i=R()(t.formData);!(n=(s=i.next()).done);n=!0){if(a(s.value,e))return!0}}catch(t){o=!0,r=t}finally{try{!n&&i.return&&i.return()}finally{if(o)throw r}}return!1}t.formData.push(e),localStorage.setItem("formData",k()(t.formData)),localStorage.setItem("idCounter",t.idCounter)},updateLocalFormData:function(t){t.localFormData=[].concat(f()(t.formData))}},actions:{saveFormData:function(t,e){var a=t.commit;a("addFormData",e),a("updateLocalFormData")}},getters:{getFormData:function(t){return t.formData}}});n.a.config.productionTip=!1,new n.a({el:"#app",router:$,store:U,components:{App:r},template:"<App/>"})},"O+bd":function(t,e){},Q1WI:function(t,e){},ZfHx:function(t,e){},gDX1:function(t,e){},sxx3:function(t,e){},vJey:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.cb1bcbb0950ed2d6f320.js.map